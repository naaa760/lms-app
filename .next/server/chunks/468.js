try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="310d3e37-1a33-44c9-a749-ecc4a19a5638",e._sentryDebugIdIdentifier="sentry-dbid-310d3e37-1a33-44c9-a749-ecc4a19a5638")}catch(e){}try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="310d3e37-1a33-44c9-a749-ecc4a19a5638",e._sentryDebugIdIdentifier="sentry-dbid-310d3e37-1a33-44c9-a749-ecc4a19a5638")}catch(e){}"use strict";exports.id=468,exports.ids=[468],exports.modules={14235:(e,t,a)=>{a.d(t,{S8:()=>x,L1:()=>b,Fe:()=>d,p4:()=>c,bb:()=>w,zA:()=>f,zR:()=>m,vK:()=>h,XF:()=>p,lp:()=>u,r7:()=>g});var n=a(43429);a(60403);var o=a(10579),r=a(99092);let s=()=>(0,r.UU)("https://jxmpktparkdbfbpidoal.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imp4bXBrdHBhcmtkYmZicGlkb2FsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDgxNzQ3MDEsImV4cCI6MjA2Mzc1MDcwMX0.PRObd1MKUPC3ZJFtvKYOKx58S5PeNyehhiJNihJOBWI",{accessToken:async()=>(await (0,o.j)()).getToken()});var l=a(33430),i=a(22763);let d=async e=>{let{userId:t}=await (0,o.j)(),a=s(),{data:n,error:r}=await a.from("companions").insert({...e,author:t}).select();if(r||!n)throw Error(r?.message||"Failed to create a companion");return n[0]},c=async({limit:e=10,page:t=1,subject:a,topic:n})=>{let o=s().from("companions").select();a&&n?o=o.ilike("subject",`%${a}%`).or(`topic.ilike.%${n}%,name.ilike.%${n}%`):a?o=o.ilike("subject",`%${a}%`):n&&(o=o.or(`topic.ilike.%${n}%,name.ilike.%${n}%`)),o=o.range((t-1)*e,t*e-1);let{data:r,error:l}=await o;if(l)throw Error(l.message);return r},f=async e=>{let t=s(),{data:a,error:n}=await t.from("companions").select().eq("id",e);return n?console.log(n):a[0]},b=async e=>{let{userId:t}=await (0,o.j)(),a=s(),{data:n,error:r}=await a.from("session_history").insert({companion_id:e,user_id:t});if(r)throw Error(r.message);return n},m=async(e=10)=>{let t=s(),{data:a,error:n}=await t.from("session_history").select("companions:companion_id (*)").order("created_at",{ascending:!1}).limit(e);if(n)throw Error(n.message);return a.map(({companions:e})=>e)},p=async(e,t=10)=>{let a=s(),{data:n,error:o}=await a.from("session_history").select("companions:companion_id (*)").eq("user_id",e).order("created_at",{ascending:!1}).limit(t);if(o)throw Error(o.message);return n.map(({companions:e})=>e)},h=async e=>{let t=s(),{data:a,error:n}=await t.from("companions").select().eq("author",e);if(n)throw Error(n.message);return a},u=async()=>{let{userId:e,has:t}=await (0,o.j)(),a=s(),n=0;if(t({plan:"pro"}))return!0;t({feature:"3_companion_limit"})?n=3:t({feature:"10_companion_limit"})&&(n=10);let{data:r,error:l}=await a.from("companions").select("id",{count:"exact"}).eq("author",e);if(l)throw Error(l.message);return!(r?.length>=n)},x=async(e,t)=>{let{userId:a}=await (0,o.j)();if(!a)return;let n=s(),{data:r,error:i}=await n.from("bookmarks").insert({companion_id:e,user_id:a});if(i)throw Error(i.message);return(0,l.revalidatePath)(t),r},g=async(e,t)=>{let{userId:a}=await (0,o.j)();if(!a)return;let n=s(),{data:r,error:i}=await n.from("bookmarks").delete().eq("companion_id",e).eq("user_id",a);if(i)throw Error(i.message);return(0,l.revalidatePath)(t),r},w=async e=>{let t=s(),{data:a,error:n}=await t.from("bookmarks").select("companions:companion_id (*)").eq("user_id",e);if(n)throw Error(n.message);return a.map(({companions:e})=>e)};(0,i.D)([d,c,f,b,m,p,h,u,x,g,w]),(0,n.A)(d,"7f5bac402195330fdabab560cc9e31e5c6ee9cefe5",null),(0,n.A)(c,"7fae424b498d0d18645a335bb2de6007a2657f4fb2",null),(0,n.A)(f,"7f9b5616db78f3ac4fa69151f340dd724861488c74",null),(0,n.A)(b,"7f8b88cf1ea7d3ee9a1997e9917d1dabd36aee62ad",null),(0,n.A)(m,"7f0856c0ac62865bbc7af1676759fd4faf95a688ee",null),(0,n.A)(p,"7f6ff3efb6b88169e2f4f793fac3c2ab157c2726dd",null),(0,n.A)(h,"7f8bf1966185a2fb6bdf0f21c788e175adc09d4a61",null),(0,n.A)(u,"7fde0d2a0b1d808790f5e80d27c63c74f27335a7bb",null),(0,n.A)(x,"7f3e62d056a67f6ea181a1dd7aa18953864cd5b109",null),(0,n.A)(g,"7f5d0355a47be797d3f0f9d5e27d30d14356e53244",null),(0,n.A)(w,"7fd03026208a361cdeff53264d79257329ae6a3893",null)},46055:(e,t,a)=>{a.r(t),a.d(t,{default:()=>o});var n=a(53377);let o=async e=>[{type:"image/x-icon",sizes:"32x31",url:(0,n.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},51840:(e,t,a)=>{a.d(t,{A:()=>d});var n=a(6768),o=a(96193),r=a(75109),s=a(44747),l=a.n(s),i=a(70183);let d=({title:e,companions:t,classNames:a})=>(0,n.jsxs)("article",{className:(0,r.cn)("companion-list",a),children:[(0,n.jsx)("h2",{className:"font-bold text-3xl",children:e}),(0,n.jsxs)(o.Table,{children:[(0,n.jsx)(o.TableHeader,{children:(0,n.jsxs)(o.TableRow,{children:[(0,n.jsx)(o.TableHead,{className:"text-lg w-2/3",children:"Lessons"}),(0,n.jsx)(o.TableHead,{className:"text-lg",children:"Subject"}),(0,n.jsx)(o.TableHead,{className:"text-lg text-right",children:"Duration"})]})}),(0,n.jsx)(o.TableBody,{children:t?.map(({id:e,subject:t,name:a,topic:s,duration:d})=>(0,n.jsxs)(o.TableRow,{children:[(0,n.jsx)(o.TableCell,{children:(0,n.jsx)(l(),{href:`/companions/${e}`,children:(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("div",{className:"size-[72px] flex items-center justify-center rounded-lg max-md:hidden",style:{backgroundColor:(0,r._)(t)},children:(0,n.jsx)(i.default,{src:`/icons/${t}.svg`,alt:t,width:35,height:35})}),(0,n.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,n.jsx)("p",{className:"font-bold text-2xl",children:a}),(0,n.jsx)("p",{className:"text-lg",children:s})]})]})})}),(0,n.jsxs)(o.TableCell,{children:[(0,n.jsx)("div",{className:"subject-badge w-fit max-md:hidden",children:t}),(0,n.jsx)("div",{className:"flex items-center justify-center rounded-lg w-fit p-2 md:hidden",style:{backgroundColor:(0,r._)(t)},children:(0,n.jsx)(i.default,{src:`/icons/${t}.svg`,alt:t,width:18,height:18})})]}),(0,n.jsx)(o.TableCell,{children:(0,n.jsxs)("div",{className:"flex items-center gap-2 w-full justify-end",children:[(0,n.jsxs)("p",{className:"text-2xl",children:[d," ",(0,n.jsx)("span",{className:"max-md:hidden",children:"mins"})]}),(0,n.jsx)(i.default,{src:"/icons/clock.svg",alt:"minutes",width:14,height:14,className:"md:hidden"})]})})]},e))})]})]})},63664:(e,t,a)=>{a.r(t),a.d(t,{"7f0856c0ac62865bbc7af1676759fd4faf95a688ee":()=>o.zR,"7f3e62d056a67f6ea181a1dd7aa18953864cd5b109":()=>o.S8,"7f440c7efeb3ee178ede445214e1559e85a2b464cd":()=>n.at,"7f5bac402195330fdabab560cc9e31e5c6ee9cefe5":()=>o.Fe,"7f5d0355a47be797d3f0f9d5e27d30d14356e53244":()=>o.r7,"7f6ff3efb6b88169e2f4f793fac3c2ab157c2726dd":()=>o.XF,"7f86fa3b553f8b40993fd00b330b7de214deb09277":()=>n.ai,"7f8b88cf1ea7d3ee9a1997e9917d1dabd36aee62ad":()=>o.L1,"7f8bf1966185a2fb6bdf0f21c788e175adc09d4a61":()=>o.vK,"7f9b5616db78f3ac4fa69151f340dd724861488c74":()=>o.zA,"7f9dbc1d8e64843f634264bbab6223bf5df897e753":()=>n.ot,"7fae424b498d0d18645a335bb2de6007a2657f4fb2":()=>o.p4,"7fd03026208a361cdeff53264d79257329ae6a3893":()=>o.bb,"7fde0d2a0b1d808790f5e80d27c63c74f27335a7bb":()=>o.lp});var n=a(85475),o=a(14235)},74631:(e,t,a)=>{a.d(t,{Table:()=>r,TableBody:()=>l,TableCell:()=>c,TableHead:()=>d,TableHeader:()=>s,TableRow:()=>i});var n=a(69694);a(10415);var o=a(18072);function r({className:e,...t}){return(0,n.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,n.jsx)("table",{"data-slot":"table",className:(0,o.cn)("w-full caption-bottom text-sm",e),...t})})}function s({className:e,...t}){return(0,n.jsx)("thead",{"data-slot":"table-header",className:(0,o.cn)("[&_tr]:border-b",e),...t})}function l({className:e,...t}){return(0,n.jsx)("tbody",{"data-slot":"table-body",className:(0,o.cn)("[&_tr:last-child]:border-0",e),...t})}function i({className:e,...t}){return(0,n.jsx)("tr",{"data-slot":"table-row",className:(0,o.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e),...t})}function d({className:e,...t}){return(0,n.jsx)("th",{"data-slot":"table-head",className:(0,o.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t})}function c({className:e,...t}){return(0,n.jsx)("td",{"data-slot":"table-cell",className:(0,o.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t})}},75109:(e,t,a)=>{a.d(t,{cn:()=>s,_:()=>l});var n=a(54533),o=a(20649);let r={science:"#E5D0FF",maths:"#FFDA6E",language:"#BDE7FF",coding:"#FFC8E4",history:"#FFECC8",economics:"#C8FFDF"};function s(...e){return(0,o.QP)((0,n.$)(e))}let l=e=>r[e]},96193:(e,t,a)=>{a.d(t,{Table:()=>o,TableBody:()=>s,TableCell:()=>d,TableHead:()=>l,TableHeader:()=>r,TableRow:()=>i});var n=a(60948);let o=(0,n.registerClientReference)(function(){throw Error("Attempted to call Table() from the server but Table is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/neha/lms-app/components/ui/table.tsx","Table"),r=(0,n.registerClientReference)(function(){throw Error("Attempted to call TableHeader() from the server but TableHeader is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/neha/lms-app/components/ui/table.tsx","TableHeader"),s=(0,n.registerClientReference)(function(){throw Error("Attempted to call TableBody() from the server but TableBody is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/neha/lms-app/components/ui/table.tsx","TableBody");(0,n.registerClientReference)(function(){throw Error("Attempted to call TableFooter() from the server but TableFooter is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/neha/lms-app/components/ui/table.tsx","TableFooter");let l=(0,n.registerClientReference)(function(){throw Error("Attempted to call TableHead() from the server but TableHead is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/neha/lms-app/components/ui/table.tsx","TableHead"),i=(0,n.registerClientReference)(function(){throw Error("Attempted to call TableRow() from the server but TableRow is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/neha/lms-app/components/ui/table.tsx","TableRow"),d=(0,n.registerClientReference)(function(){throw Error("Attempted to call TableCell() from the server but TableCell is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/neha/lms-app/components/ui/table.tsx","TableCell");(0,n.registerClientReference)(function(){throw Error("Attempted to call TableCaption() from the server but TableCaption is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/neha/lms-app/components/ui/table.tsx","TableCaption")}};
//# sourceMappingURL=468.js.map